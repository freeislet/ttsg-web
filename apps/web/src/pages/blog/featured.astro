---
import { getCollection } from 'astro:content'
import Layout from '@/layouts/Layout.astro'
import Header from '@/components/Header.astro'
import Footer from '@/components/Footer.astro'
import BlogHeader from '@/components/blog/BlogHeader.astro'
import BlogList from '@/components/blog/BlogList.astro'
import { pageSEO } from '@/lib/seo/config'

// 모든 블로그 포스트 가져오기
const allPosts = await getCollection('blog')

// 추천 포스트만 필터링
const featuredPosts = allPosts.filter((post) => !post.data.draft && post.data.featured)

// 발행일 기준 내림차순 정렬
featuredPosts.sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime())

const pageTitle = '추천 포스트 | TTSG'
const pageDescription = 'TTSG에서 엄선한 추천 블로그 포스트들을 확인해보세요.'

const seo = {
  ...pageSEO.blog,
  title: pageTitle,
  description: pageDescription,
  url: '/blog/featured',
  type: 'website' as const,
}
---

<Layout seo={seo}>
  <Header />

  <main class="min-h-screen bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 py-8">
      <BlogHeader title="추천 포스트" count={featuredPosts.length} currentPage="featured" />
      <BlogList posts={featuredPosts} featured={true} />
    </div>
  </main>

  <Footer />
</Layout>
